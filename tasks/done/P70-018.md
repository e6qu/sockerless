# P70-018: Azure — Smoke Test (ACA + Azure Functions Against Simulator)

**Component:** SIM (simulators/azure)
**Phase:** 70 — Milestone 3 (Azure Fidelity)
**Depends on:** P70-013, P70-014, P70-015, P70-016, P70-017
**Estimated effort:** L

---

## Description

End-to-end integration test that starts the Azure simulator, exercises the
ACA backend's flow (create job → start → get logs → stop → delete), and the
Azure Functions flow (create → invoke → get logs → delete). Validates the
full path: SDK calls → simulator → state → log injection → KQL query.

## Acceptance Criteria

1. Test starts Azure simulator on a free port
2. ACA flow: CreateOrUpdate job → Start (get execution) → list executions
   (verify Running) → query ContainerAppConsoleLogs_CL (verify entries) →
   StopExecution → list executions (verify Stopped) → Delete job
3. Azure Functions flow: CreateOrUpdate function app → invoke via HTTP →
   query AppTraces (verify entries) → Delete function app
4. All assertions pass
5. Test is self-contained

## Definition of Done

- [ ] `go build ./...` passes
- [ ] All existing tests pass
- [ ] New integration test passes
- [ ] PR created via `gh pr create`, CI passes, merged via `gh pr merge`

## Suggested File Paths

- `simulators/azure/sdk-tests/integration_test.go` — new file
