# P70-004: AWS — ECS StopCode Field

**Component:** SIM (simulators/aws)
**Phase:** 70 — Milestone 1 (AWS Fidelity)
**Depends on:** —
**Estimated effort:** S

---

## Description

Add `StopCode` enum field to the `DescribeTasks` response. Real AWS returns
both `StoppedReason` (free text) and `StopCode` (enum). The backend doesn't
currently read `StopCode`, but it's part of the real API contract and any SDK
tests or future backend changes would expect it.

## Context

- Real AWS `StopCode` values: `TaskFailedToStart`, `EssentialContainerExited`,
  `UserInitiated`, `ServiceSchedulerInitiated`
- Current simulator only returns `StoppedReason` string
- Backend reads `StoppedReason` only (`containers.go:672`)

## Acceptance Criteria

1. `DescribeTasks` includes `StopCode` field when task is STOPPED
2. `StopCode` is `"UserInitiated"` when stopped via `StopTask` API
3. `StopCode` is `"EssentialContainerExited"` when auto-stopped (3s timeout)
4. `StopCode` is omitted/empty when task is PENDING or RUNNING
5. New SDK test verifies StopCode values

## Definition of Done

- [ ] `go build ./...` passes
- [ ] All existing SDK tests pass
- [ ] New SDK test passes
- [ ] PR created via `gh pr create`, CI passes, merged via `gh pr merge`

## Suggested File Paths

- `simulators/aws/ecs.go` — add StopCode to ECSTask struct and handlers
- `simulators/aws/sdk-tests/ecs_test.go` — add test
