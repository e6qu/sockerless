# P70-019: All Clouds — Configurable Execution Timeout

**Component:** SIM (simulators/aws, simulators/gcp, simulators/azure)
**Phase:** 70 — Milestone 4 (Cross-Cloud)
**Depends on:** —
**Estimated effort:** S

---

## Description

Replace the hardcoded 3-second auto-stop timeout in all three simulators with
a configurable `SIM_EXEC_TIMEOUT` environment variable (default 30s). The
current 3s causes false completions when agent connections are slow.

## Context

- `simulators/aws/ecs.go`: 3s auto-stop goroutine for ECS tasks
- `simulators/gcp/cloudrunjobs.go`: 3s auto-stop for Cloud Run executions
- `simulators/azure/containerapps.go`: 3s auto-stop for ACA executions
- `simulators/aws/lambda.go`: likely similar for Lambda invocations

## Acceptance Criteria

1. All three simulators read `SIM_EXEC_TIMEOUT` env var
2. Default is `"30s"` (parsed with `time.ParseDuration`)
3. The auto-stop goroutine uses this duration instead of hardcoded 3s
4. Setting `SIM_EXEC_TIMEOUT=3s` preserves current fast-test behavior
5. All existing tests pass (set `SIM_EXEC_TIMEOUT=3s` in test setup)
6. Lambda simulator also respects the timeout

## Definition of Done

- [ ] `go build ./...` passes in all three simulators
- [ ] All existing tests pass
- [ ] PR created via `gh pr create`, CI passes, merged via `gh pr merge`

## Suggested File Paths

- `simulators/aws/ecs.go`, `simulators/aws/lambda.go`
- `simulators/gcp/cloudrunjobs.go`
- `simulators/azure/containerapps.go`
- Shared config could go in `simulators/shared/config.go`

## Notes

- Tests should set `SIM_EXEC_TIMEOUT=3s` to keep fast execution
- Consider also setting the value in TestMain setup
