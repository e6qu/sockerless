# P70-010: GCP — Cloud Functions Invoke URL Fidelity

**Component:** SIM (simulators/gcp)
**Phase:** 70 — Milestone 2 (GCP Fidelity)
**Depends on:** —
**Estimated effort:** S

---

## Description

Verify that `ServiceConfig.Uri` returned by `CreateFunction` is consistent
with the invoke endpoint the simulator exposes. The Cloud Functions backend
reads `result.ServiceConfig.Uri` and POSTs to it. The simulator uses a
custom path (`/v2-functions-invoke/{id}`) — the returned URI must match.

## Context

- Backend `backends/cloudrun-functions/containers.go:166`: reads
  `result.ServiceConfig.Uri` after CreateFunction
- Simulator `cloudfunctions.go`: sets `ServiceUri` based on request host
- Invoke path: `POST /v2-functions-invoke/{functionID}`

## Acceptance Criteria

1. `CreateFunction` response includes `ServiceConfig.Uri` that points to
   the simulator's invoke endpoint (e.g., `http://localhost:{port}/v2-functions-invoke/{id}`)
2. The backend can POST to this URI and reach the invoke handler
3. SDK test: create function → extract Uri → POST to it → verify response

## Definition of Done

- [ ] `go build ./...` passes
- [ ] All existing tests pass
- [ ] New SDK test passes
- [ ] PR created via `gh pr create`, CI passes, merged via `gh pr merge`

## Suggested File Paths

- `simulators/gcp/cloudfunctions.go` — verify/fix ServiceUri construction
- `simulators/gcp/sdk-tests/functions_test.go` — add invoke test
