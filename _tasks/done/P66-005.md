# P66-005: gitlabhub Middleware + Pipeline Spans

**Status:** Done
**Phase:** 66 â€” OpenTelemetry Tracing

## What
Added `otelhttp.NewHandler` middleware to gitlabhub server.go. Added `ctx context.Context` + OTel spans to 3 engine functions: submitPipeline, dispatchReadyJobs, onJobCompleted. Each span includes relevant attributes (pipeline.project, pipeline.id, job.id, job.status).

Updated production callers in pipeline_api.go, jobs_update.go. Updated ~13 test call sites in engine_test.go, cancel_test.go, artifacts_test.go with `context.Background()`.

## Tests
129 gitlabhub tests PASS.
