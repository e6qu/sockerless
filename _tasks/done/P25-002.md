# P25-002: Multi-backend upstream act test runner

**Status:** DONE
**Phase:** 25

## Summary

Extended upstream act test infrastructure to run against simulator backends (ECS, Lambda), not just memory. The Docker image now builds all 7 backends, 3 simulators, frontend, and agent. The run.sh script accepts `--backend` parameter and uses `start-backend.sh` for non-memory backends.

## Files Modified
- `tests/upstream/act/Dockerfile` — Multi-stage build with all backends + simulators + agent (was memory-only)
- `tests/upstream/act/run.sh` — Added `--backend` parameter, sources `lib.sh`/`start-backend.sh` for simulator backends
- `Makefile` — Added `upstream-test-act-ecs`, `upstream-test-act-lambda`, `upstream-test-act-all` targets

## New Makefile Targets
- `make upstream-test-act` — Memory backend (existing)
- `make upstream-test-act-ecs` — ECS via simulator
- `make upstream-test-act-lambda` — Lambda via simulator
- `make upstream-test-act-all` — Memory + ECS + Lambda

## Results

| Backend | PASS | FAIL | Notes |
|---------|:----:|:----:|-------|
| Memory | 56 | 31 | Baseline |
| ECS (simulator) | 59 | 28 | +6 pass (real bash/node), -3 fail (BASH env injection in sh) |
