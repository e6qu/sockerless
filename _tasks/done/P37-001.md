# P37-001: bleephub Git Repositories

**Component:** bleephub
**Phase:** 37
**Status:** DONE

---

## Summary

Added in-memory git repository hosting to bleephub using `go-git/go-git/v5` with memory storage.

## New Files

| File | Lines | Purpose |
|---|---|---|
| `store_repos.go` | ~120 | Repo type, CRUD methods, go-git bare repo init |
| `gh_repos_rest.go` | ~180 | REST: create/get/update/delete/list repos |
| `git_http.go` | ~260 | Smart HTTP: info/refs, upload-pack, receive-pack |
| `gh_repos_refs.go` | ~170 | Branch/ref REST endpoints |
| `gh_repos_objects.go` | ~250 | Commits, trees, blobs, README, contents |
| `gh_repos_graphql.go` | ~300 | GraphQL types, pagination, mutations |
| `gh_repos_test.go` | ~350 | 14 unit tests |

## Modified Files

- `store.go` — Added Repos/ReposByName/GitStorages maps, NextRepo counter
- `gh_graphql.go` — Wired repo fields + Mutation type into schema
- `server.go` — Registered repo routes, git handling in catch-all
- `go.mod` — Added `go-git/go-git/v5` dependency

## Test Results

- 33 unit tests pass (19 existing + 14 new)
- 0 lint issues in new code
- `gh api` GraphQL mutations + queries work
- `git push` + `git clone` validated with real git CLI

## Key Learnings

- Go 1.22+ ServeMux wildcard patterns conflict with trailing-slash routes
- go-git `git.Init` creates HEAD→master; must update after push if target doesn't exist
- Git routes handled in catch-all to avoid mux conflicts
- Relay pagination: base64-encoded `cursor:N` format
