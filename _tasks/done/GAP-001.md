# GAP-001: ECS CloudWatch Log Injection in Simulator

**Status:** DONE
**Phase:** 9 — Simulator Gap Fixes

## Problem

`TestECSContainerLogs` failed because the AWS simulator's `handleECSRunTask` never injected CloudWatch log entries. The ECS backend queries CloudWatch with log stream `{containerID[:12]}/main/{taskID}` and got empty results.

## Root Cause

Both `ecs.go` and `cloudwatch.go` are `package main` — the ECS handler could directly access `cwLogGroups`, `cwLogStreams`, `cwLogEvents` but never did.

## Changes

- **`simulators/aws/ecs.go`** — In the RunTask handler's goroutine, after transitioning the task to RUNNING:
  1. Reads `LogConfiguration.Options` from the task definition's container definitions
  2. Extracts `awslogs-group`, `awslogs-stream-prefix`, container name
  3. Creates log group in `cwLogGroups` (if not exists)
  4. Creates log stream as `{awslogs-stream-prefix}/{containerName}/{taskID}` in `cwLogStreams`
  5. Inserts synthetic log event with the container command into `cwLogEvents`
  6. On auto-stop, adds a "task completed" log event

## Result

- `TestECSContainerLogs`: PASS (was FAIL)
- Log stream naming matches backend format: `{containerID[:12]}/main/{taskID}`
