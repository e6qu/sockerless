# P35-010: Integration test + verification

**Component:** bleephub
**Phase:** 35
**Depends on:** P35-009
**Status:** DONE

---

## Description

Ran the full integration test and iterated on protocol issues until the official GitHub Actions runner successfully executed a container workflow through bleephub + Sockerless.

## Issues Discovered and Fixed

1. **TemplateValidationException** — Step inputs required explicit TemplateToken format: `{"type": 0, "lit": "value"}` for strings, `{"type": 2, "map": [...]}` for mappings. JSON objects without `type` field create empty StringTokens.

2. **Container not running** — `tail -f /dev/null` keepalive exits immediately in WASM (no inotify). Added `isTailDevNull()` detection to block on context. Also added `/dev/null` to sandbox rootfs.

3. **Script file not found** — `resolveBindMounts` only handled named volumes, not host path bind mounts. Added `filepath.IsAbs` check for host paths.

4. **Symlink loops** — Overlapping volume mounts (`/__w` and `/__w/_temp`) created circular symlinks. Sort container paths shortest-first, skip symlinks for sub-paths.

## Result

Both steps execute successfully:
- `Hello from bleephub via Sockerless`
- `Linux sandbox 5.15.0 #1 SMP aarch64 GNU/Linux`
