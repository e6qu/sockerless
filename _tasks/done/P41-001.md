# P41-001: bleephub API Conformance + `gh` CLI Test Suite

**Phase:** 41
**Status:** Complete
**Date:** 2026-02-22

## Tasks Completed

| ID | Description | Status |
|---|---|---|
| P41-001 | OpenAPI conformance checker (Go test, vendored schemas) | ✓ |
| P41-002 | REST pagination (Link headers) | ✓ |
| P41-003 | Error format conformance (422 errors array) | ✓ |
| P41-004 | Rate limit headers (verification tests) | ✓ |
| P41-005 | Content negotiation (Accept, charset, X-GitHub-Api-Version) | ✓ |
| P41-006 | `gh` CLI integration test suite (Docker-based) | ✓ |
| P41-007 | `gh api` raw endpoint tests (cross-endpoint consistency) | ✓ |
| P41-008 | Fix protocol gaps (permissions in repoToJSON) | ✓ |
| P41-009 | Save final state | ✓ |

## Test Results

- bleephub unit tests: 148 PASS (was 107)
- bleephub gh CLI integration: 1 PASS (35 assertions)
- All existing tests: no regression

## New Files

- `bleephub/gh_pagination.go` — Generic REST pagination infrastructure
- `bleephub/gh_pagination_test.go` — 7 pagination tests
- `bleephub/gh_conformance_test.go` — 23 conformance tests
- `bleephub/gh_openapi_test.go` — 11 OpenAPI schema validation tests
- `bleephub/testdata/openapi-schemas.json` — Vendored GitHub OpenAPI schemas
- `bleephub/test/run-gh-test.sh` — gh CLI integration test script
- `bleephub/Dockerfile.gh-test` — Docker image for gh CLI test
